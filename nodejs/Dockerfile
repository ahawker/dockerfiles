# dockerfiles/nodejs
#
# Dockerfile for Node.js.
ARG REPO
ARG BASE_IMAGE
ARG TAG=latest

FROM $REPO/$BASE_IMAGE:$TAG

ARG NODEJS_VERSION
ARG ALPINE_NODEJS_PACKAGE_NAME
ARG ALPINE_NODEJS_PACKAGE_VERSION

RUN test -n "$NODEJS_VERSION" && \
    test -n "$ALPINE_NODEJS_PACKAGE_NAME" && \
    test -n "$ALPINE_NODEJS_PACKAGE_VERSION"

ENV NODEJS_VERSION=$NODEJS_VERSION \
    ALPINE_NODEJS_PACKAGE_NAME=$ALPINE_NODEJS_PACKAGE_NAME \
    ALPINE_NODEJS_PACKAGE_VERSION=$ALPINE_NODEJS_PACKAGE_VERSION

USER root

RUN apk add --no-cache $ALPINE_NODEJS_PACKAGE_NAME="$ALPINE_NODEJS_PACKAGE_VERSION"

USER $USER
