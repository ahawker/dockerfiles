# dockerfiles/jre
#
# Dockerfile for Java Runtime Environment (JRE).
FROM ahawker/alpine:latest

LABEL maintainer="Andrew Hawker <andrew.r.hawker@gmail.com>"

ARG JAVA_VERSION
ARG JAVA_MAJOR_VERSION
ARG JAVA_MINOR_VERSION
ARG ALPINE_PACKAGE_NAME
ARG ALPINE_PACKAGE_VERSION

RUN test -n "$JAVA_VERSION" && \
    test -n "$JAVA_MAJOR_VERSION" && \
    test -n "$JAVA_MINOR_VERSION" && \
    test -n "$ALPINE_PACKAGE_VERSION" && \
    test -n "$ALPINE_PACKAGE_VERSION"

ENV JAVA_VERSION=$JAVA_VERSION \
    JAVA_MAJOR_VERSION=$JAVA_MAJOR_VERSION \
    JAVA_MINOR_VERSION=$JAVA_MINOR_VERSION \
    ALPINE_PACKAGE_NAME=$ALPINE_PACKAGE_NAME \
    ALPINE_PACKAGE_VERSION=$ALPINE_PACKAGE_VERSION \
    JAVA_HOME=/usr/lib/jvm/java-$JAVA_MAJOR_VERSION.$JAVA_MINOR_VERSION-openjdk/jre \
    OPENJDK_HOME=/usr/lib/jvm/java-$JAVA_MAJOR_VERSION.$JAVA_MINOR_VERSION-openjdk

ENV PATH=$PATH:$OPENJDK_HOME/jre/bin:$OPENJDK_HOME/bin

USER root
RUN apk add --no-cache $ALPINE_PACKAGE_NAME="$ALPINE_PACKAGE_VERSION"
USER $USER
