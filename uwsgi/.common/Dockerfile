# dockerfiles/uwsgi
#
# Dockerfile for https://github.com/unbit/uwsgi
ARG REPO
ARG BASE_IMAGE
ARG TAG=latest

FROM $REPO/$BASE_IMAGE:$TAG

ARG LABEL_PREFIX
ARG UWSGI_VERSION
ARG ALPINE_UWSGI_PACKAGE_NAME
ARG ALPINE_UWSGI_PACKAGE_VERSION

RUN test -n "$LABEL_PREFIX" && \
    test -n "$UWSGI_VERSION" && \
    test -n "$ALPINE_UWSGI_PACKAGE_NAME" && \
    test -n "$ALPINE_UWSGI_PACKAGE_VERSION"

LABEL $LABEL_PREFIX.uwsgi.version=$UWSGI_VERSION

ENV BUMPVERSION_VERSION=$BUMPVERSION_VERSION

USER root

RUN apk add --no-cache \
    $ALPINE_UWSGI_PACKAGE_NAME="$ALPINE_UWSGI_PACKAGE_VERSION"

USER $USR
